@page "/"
@using MetromontCastLink.Shared.Models
@using MetromontCastLink.Shared.Services
@using Syncfusion.Blazor.Buttons
@inject NavigationManager Navigation
@inject IACCService ACCService

<PageTitle>Metromont El Diablo</PageTitle>

<div class="home-page">
    <div class="welcome-section">
        <h1>Welcome to Metromont El Diablo</h1>
        <p>Your integrated manufacturing execution system connecting shop floor operations with project management, design development, and quality control.</p>
    </div>

    <div class="modules-grid">
        <!-- Production Scheduling -->
        <div class="module-card production-scheduling">
            <div class="module-icon">
                <span class="icon">📊</span>
            </div>
            <h3>Production Scheduling</h3>
            <p>Plan and schedule production runs, manage capacity, and optimize resource allocation across all casting lines.</p>
            <div class="module-footer">
                <span class="status active">Active</span>
                <span class="availability">Available Now</span>
            </div>
        </div>

        <!-- Inventory Tracking -->
        <div class="module-card inventory-tracking">
            <div class="module-icon">
                <span class="icon">📦</span>
            </div>
            <h3>Inventory Tracking</h3>
            <p>Real-time inventory management for raw materials, finished products, and work-in-progress tracking.</p>
            <div class="module-footer">
                <span class="status in-development">In Development</span>
                <span class="availability">Q1 2025</span>
            </div>
        </div>

        <!-- Haul Management -->
        <div class="module-card haul-management">
            <div class="module-icon">
                <span class="icon">🚛</span>
            </div>
            <h3>Haul Management</h3>
            <p>Coordinate transportation, delivery scheduling, and logistics for finished precast elements.</p>
            <div class="module-footer">
                <span class="status in-planning">In Planning</span>
                <span class="availability">Q3 2025</span>
            </div>
        </div>

        <!-- Quality Control -->
        <div class="module-card quality-control">
            <div class="module-icon">
                <span class="icon">✓</span>
            </div>
            <h3>Quality Control</h3>
            <p>Comprehensive quality management including stressing calculations, testing protocols, and compliance tracking.</p>
            <div class="module-footer">
                <span class="status active">Active</span>
                <span class="availability">Available Now</span>
            </div>
        </div>

        <!-- Fab Shop -->
        <div class="module-card fab-shop">
            <div class="module-icon">
                <span class="icon">🔧</span>
            </div>
            <h3>Fab Shop</h3>
            <p>Manage fabrication operations, equipment maintenance, and production line efficiency metrics.</p>
            <div class="module-footer">
                <span class="status in-development">In Development</span>
                <span class="availability">Q2 2025</span>
            </div>
        </div>

        <!-- Design Development -->
        <div class="module-card design-development">
            <div class="module-icon">
                <span class="icon">📐</span>
            </div>
            <h3>Design Development</h3>
            <p>Technical drawing management, CAD integration, engineering calculations, and design revision control.</p>
            <div class="module-footer">
                <span class="status active">Active</span>
                <span class="availability">In Development</span>
            </div>
        </div>
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Check authentication status when page loads
        var isAuthenticated = await ACCService.IsAuthenticatedAsync();
        if (!isAuthenticated)
        {
            // For now, we'll just log this - later we can redirect to signin
            Console.WriteLine("User not authenticated");
        }
    }

    private void NavigateToModule(string route)
    {
        Navigation.NavigateTo(route);
    }
}