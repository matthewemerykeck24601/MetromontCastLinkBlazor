@page "/"
@using MetromontCastLink.Shared.Models
@using MetromontCastLink.Shared.Services
@using Syncfusion.Blazor.Buttons
@inject NavigationManager Navigation
@inject IACCService ACCService

<PageTitle>Metromont El Diablo</PageTitle>

<div class="home-page">
    <div class="welcome-section">
        <h1>Welcome to Metromont El Diablo</h1>
        <p>Your integrated manufacturing execution system connecting shop floor operations with project management, design development, and quality control.</p>
    </div>

    <div class="modules-grid">
        <!-- Production Scheduling -->
        <div class="module-card production-scheduling" @onclick="@(() => NavigateToModule("/production/scheduling"))">
            <div class="module-icon">
                <span class="icon">📊</span>
            </div>
            <h3>Production Scheduling</h3>
            <p>Plan and schedule production runs, manage capacity, and optimize resource allocation across all casting lines.</p>
            <div class="module-footer">
                <span class="status active">Active</span>
                <span class="availability">Available Now</span>
            </div>
        </div>

        <!-- Inventory Tracking -->
        <div class="module-card inventory-tracking" @onclick="@(() => NavigateToModule("/inventory"))">
            <div class="module-icon">
                <span class="icon">📦</span>
            </div>
            <h3>Inventory Tracking</h3>
            <p>Real-time inventory management for raw materials, finished products, and work-in-progress tracking.</p>
            <div class="module-footer">
                <span class="status in-development">In Development</span>
                <span class="availability">Q1 2025</span>
            </div>
        </div>

        <!-- Haul Management -->
        <div class="module-card haul-management" @onclick="@(() => NavigateToModule("/haul"))">
            <div class="module-icon">
                <span class="icon">🚛</span>
            </div>
            <h3>Haul Management</h3>
            <p>Coordinate transportation, delivery scheduling, and logistics for finished precast elements.</p>
            <div class="module-footer">
                <span class="status in-planning">In Planning</span>
                <span class="availability">Q3 2025</span>
            </div>
        </div>

        <!-- Quality Control -->
        <div class="module-card quality-control" @onclick="@(() => NavigateToModule("/quality"))">
            <div class="module-icon">
                <span class="icon">✓</span>
            </div>
            <h3>Quality Control</h3>
            <p>Comprehensive quality management including stressing calculations, testing protocols, and compliance tracking.</p>
            <div class="module-footer">
                <span class="status active">Active</span>
                <span class="availability">Available Now</span>
            </div>
        </div>

        <!-- Fab Shop -->
        <div class="module-card fab-shop" @onclick="@(() => NavigateToModule("/fab-shop"))">
            <div class="module-icon">
                <span class="icon">🔧</span>
            </div>
            <h3>Fab Shop</h3>
            <p>Manage fabrication operations, equipment maintenance, and production line efficiency metrics.</p>
            <div class="module-footer">
                <span class="status in-development">In Development</span>
                <span class="availability">Q2 2025</span>
            </div>
        </div>

        <!-- Design Development -->
        <div class="module-card design-development" @onclick="@(() => NavigateToModule("/engineering/calculator"))">
            <div class="module-icon">
                <span class="icon">📐</span>
            </div>
            <h3>Design Development</h3>
            <p>Technical drawing management, CAD integration, engineering calculations, and design revision control.</p>
            <div class="module-footer">
                <span class="status active">Active</span>
                <span class="availability">In Development</span>
            </div>
        </div>
    </div>

    <!-- Integration Section -->
    <section class="integration-section">
        <h3 class="integration-title">
            <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" />
            </svg>
            Autodesk Construction Cloud Integration
        </h3>
        <div class="integration-grid">
            <div class="integration-item">
                <div class="integration-icon">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" />
                    </svg>
                </div>
                <div class="integration-text">
                    <h4>BIM 360 Projects</h4>
                    <p>Direct project access</p>
                </div>
            </div>
            <div class="integration-item">
                <div class="integration-icon">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-1.45-5c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45z" />
                    </svg>
                </div>
                <div class="integration-text">
                    <h4>Model Coordination</h4>
                    <p>3D model viewing</p>
                </div>
            </div>
            <div class="integration-item">
                <div class="integration-icon">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2l-5.5 9h11z M12 5.84L13.93 9h-3.87z M17.5 13c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 7c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z M3 21.5h8v-8H3v8zm2-6h4v4H5v-4z" />
                    </svg>
                </div>
                <div class="integration-text">
                    <h4>Document Management</h4>
                    <p>Seamless data flow</p>
                </div>
            </div>
            <div class="integration-item">
                <div class="integration-icon">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" />
                    </svg>
                </div>
                <div class="integration-text">
                    <h4>Real-time Dashboard</h4>
                    <p>Live production monitoring</p>
                </div>
            </div>
        </div>
    </section>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Check authentication status when page loads
        var isAuthenticated = await ACCService.IsAuthenticatedAsync();
        if (!isAuthenticated)
        {
            // For now, we'll just log this - later we can redirect to signin
            Console.WriteLine("User not authenticated");
        }
    }

    private void NavigateToModule(string route)
    {
        Navigation.NavigateTo(route);
    }
}